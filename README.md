# SAIA - ç³»ç»Ÿèµ„äº§å®Œæ•´æ€§å®¡è®¡å™¨ (çº¯Cå®žçŽ°ç‰ˆæœ¬)

## æ¦‚è¿°

è¿™æ˜¯ SYSTEM ASSET INTEGRITY AUDITOR (SAIA) çš„çº¯Cè¯­è¨€å®žçŽ°ï¼Œå®Œå…¨è‡ªåŒ…å«ï¼Œæ— éœ€ä»»ä½•ç¬¬ä¸‰æ–¹ä¾èµ–åº“ã€‚

**ç‰ˆæœ¬ï¼š** 24.0  
**ç‰¹ç‚¹ï¼š**
- çº¯Cæ ‡å‡†åº“å®žçŽ°ï¼Œæ— ç¬¬ä¸‰æ–¹ä¾èµ–
- è·¨å¹³å°æ”¯æŒ (Windows/Linux/macOS)
- æ–°å¢žè‡ªåŠ¨åŽ‹èƒŒåŠŸèƒ½ (Backpressure Control)
- é«˜æ€§èƒ½ç½‘ç»œæ‰«æ
- æ”¯æŒXUIé¢æ¿å’ŒSOCKS5ä»£ç†å®¡è®¡

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- âœ… ç½‘ç»œç«¯å£æ‰«æ
- âœ… XUIé¢æ¿å‘çŽ°å’ŒéªŒè¯
- âœ… SOCKS5ä»£ç†å‘çŽ°å’ŒéªŒè¯
- âœ… å¤šçº¿ç¨‹å¹¶å‘æ‰«æ
- âœ… çŠ¶æ€æŒä¹…åŒ–
- âœ… è¯¦ç»†æ—¥å¿—è®°å½•
- âœ… æŠ¥å‘Šç”Ÿæˆ

### æ–°å¢žåŠŸèƒ½ï¼ˆCè¯­è¨€ç‰ˆæœ¬ï¼‰
- ðŸ†• **è‡ªåŠ¨åŽ‹èƒŒæŽ§åˆ¶** - æ ¹æ®ç³»ç»Ÿè´Ÿè½½åŠ¨æ€è°ƒæ•´å¹¶å‘æ•°
- ðŸ†• å®žæ—¶CPU/å†…å­˜ç›‘æŽ§
- ðŸ†• æ™ºèƒ½æµé‡æŽ§åˆ¶
- ðŸ†• è‡ªåŠ¨é™æµæœºåˆ¶

## ç¼–è¯‘è¯´æ˜Ž

### å‰ç½®è¦æ±‚

**Windowsï¼š**
- MinGW-w64 æˆ– Visual Studio
- æˆ– MSYS2

**Linuxï¼š**
```bash
sudo apt install build-essential git    # Ubuntu/Debian
```

**macOSï¼š**
```bash
xcode-select --install
```

### ç¼–è¯‘æ­¥éª¤

**æ–¹å¼1ï¼šä½¿ç”¨ Makeï¼ˆæŽ¨èï¼‰**
```bash
cd F:\C
make
```

**æ–¹å¼2ï¼šWindows ä½¿ç”¨ mingw32-gcc**
```bash
cd F:\C
mingw32-gcc *.c -o saia.exe -lws2_32 -lwinhttp -std=c11 -Wall -O2
```

**æ–¹å¼3ï¼šLinux/macOS ä½¿ç”¨ gcc**
```bash
cd F:\C
gcc *.c -o saia -lpthread -lm -std=c11 -Wall -O2
```

### æ¸…ç†ç¼–è¯‘æ–‡ä»¶
```bash
make clean          # åªæ¸…ç†ç¼–è¯‘äº§ç‰©
make distclean      # æ¸…ç†æ‰€æœ‰æ–‡ä»¶åŒ…æ‹¬æ•°æ®æ–‡ä»¶
```

## ä½¿ç”¨æ–¹æ³•

### è¿è¡Œç¨‹åº
```bash
# Windows
saia.exe

# Linux/macOS
./saia
```

### åŠŸèƒ½èœå•

```
1. å¼€å§‹å®¡è®¡æ‰«æ     - æ‰«æç›®æ ‡èŠ‚ç‚¹
2. é…ç½®å‚æ•°         - ä¿®æ”¹ç³»ç»Ÿé…ç½®
3. æŸ¥çœ‹æŠ¥è¡¨         - æŸ¥çœ‹å®¡è®¡ç»“æžœ
4. å¯¼å‡ºç»“æžœ         - å¯¼å‡ºæ‰«æç»“æžœ
5. èŠ‚ç‚¹ç®¡ç†         - ç®¡ç†ç›®æ ‡èŠ‚ç‚¹
6. å‡­æ®ç®¡ç†         - ç®¡ç†è®¤è¯å‡­æ®
7. TelegramæŽ¨é€      - é…ç½®æ¶ˆæ¯é€šçŸ¥
8. åŽ‹èƒŒæŽ§åˆ¶         - ðŸ†• è°ƒæ•´è‡ªåŠ¨åŽ‹èƒŒå‚æ•°
9. æ¸…ç†æ•°æ®         - æ¸…ç†è¿è¡Œæ—¶æ•°æ®
0. é€€å‡º
```

## æ–‡ä»¶ç»“æž„

```
F:\C\
â”œâ”€â”€ saia.h              # ä¸»å¤´æ–‡ä»¶
â”œâ”€â”€ main.c              # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ config.c            # é…ç½®ç®¡ç†
â”œâ”€â”€ file_ops.c          # æ–‡ä»¶æ“ä½œ
â”œâ”€â”€ network.c           # ç½‘ç»œæ“ä½œ
â”œâ”€â”€ scanner.c           # æ‰«æå™¨æ ¸å¿ƒ
â”œâ”€â”€ json_parser.c       # JSONè§£æžå™¨ï¼ˆçº¯Cå®žçŽ°ï¼‰
â”œâ”€â”€ utils.c             # å·¥å…·å‡½æ•°
â”œâ”€â”€ color.c             # å½©è‰²è¾“å‡º
â”œâ”€â”€ string_ops.c        # å­—ç¬¦ä¸²æ“ä½œ
â”œâ”€â”€ backpressure.c      # ðŸ†• åŽ‹èƒŒæŽ§åˆ¶æ¨¡å—
â”œâ”€â”€ Makefile            # ç¼–è¯‘é…ç½®
â””â”€â”€ DE.py               # åŽŸPythonç‰ˆæœ¬ï¼ˆå‚è€ƒï¼‰
```

## é…ç½®æ–‡ä»¶

ç¨‹åºå°†åœ¨è¿è¡Œç›®å½•åˆ›å»ºä»¥ä¸‹æ–‡ä»¶ï¼š

- `sys_audit_state.json` - çŠ¶æ€æŒä¹…åŒ–
- `sys_audit_events.log` - äº‹ä»¶æ—¥å¿—
- `audit_report.log` - å®¡è®¡æŠ¥å‘Š
- `nodes.list` - ç›®æ ‡èŠ‚ç‚¹åˆ—è¡¨
- `tokens.list` - è®¤è¯å‡­æ®åˆ—è¡¨
- `telegram_notify.json` - Telegramé…ç½®

## æ–°å¢žï¼šè‡ªåŠ¨åŽ‹èƒŒåŠŸèƒ½

### åŠŸèƒ½è¯´æ˜Ž

è‡ªåŠ¨åŽ‹èƒŒåŠŸèƒ½ä¼šæ ¹æ®ç³»ç»Ÿè´Ÿè½½åŠ¨æ€è°ƒæ•´æ‰«æé€Ÿåº¦ï¼Œé˜²æ­¢èµ„æºè€—å°½ï¼š

1. **CPUç›‘æŽ§** - æŒç»­ç›‘æŽ§CPUä½¿ç”¨çŽ‡
2. **å†…å­˜ç›‘æŽ§** - ç›‘æŽ§å¯ç”¨å†…å­˜
3. **è‡ªåŠ¨é™æµ** - è¶…è¿‡é˜ˆå€¼æ—¶è‡ªåŠ¨é™ä½Žå¹¶å‘æ•°
4. **æ™ºèƒ½æ¢å¤** - è´Ÿè½½é™ä½Žæ—¶è‡ªåŠ¨æ¢å¤é€Ÿåº¦

### é…ç½®å‚æ•°

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜Ž |
|------|--------|------|
| CPUé˜ˆå€¼ | 80% | CPUä½¿ç”¨çŽ‡ä¸Šé™ |
| å†…å­˜é˜ˆå€¼ | 2048 MB | æœ€å°å¯ç”¨å†…å­˜ |
| æœ€å¤§è¿žæŽ¥æ•° | 500 | æœ€å¤§å¹¶å‘è¿žæŽ¥ |
| æœ€å°è¿žæŽ¥æ•° | 50 | æœ€å°å¹¶å‘è¿žæŽ¥ |
| æ£€æŸ¥é—´éš” | 1ç§’ | ç›‘æŽ§æ£€æŸ¥é¢‘çŽ‡ |

### ä½¿ç”¨ç¤ºä¾‹

åœ¨ç¨‹åºä¸­é€‰æ‹©èœå•é¡¹ **[8] åŽ‹èƒŒæŽ§åˆ¶**ï¼š

```
ã€åŽ‹èƒŒæŽ§åˆ¶ã€‘
å½“å‰çŠ¶æ€: å·²å¯ç”¨

é…ç½®:
  CPUé˜ˆå€¼: 80.0%
  å†…å­˜é˜ˆå€¼: 2048.0 MB
  æœ€å¤§è¿žæŽ¥: 500
  å®žæ—¶CPU: 45.2%
  å®žæ—¶å†…å­˜: 6144.0 MB
  å½“å‰è¿žæŽ¥: 200
  é™æµçŠ¶æ€: å¦

  [1] å¯ç”¨/ç¦ç”¨
  [2] è°ƒæ•´é˜ˆå€¼
  [3] ç«‹å³æ£€æŸ¥
  [0] è¿”å›ž
```

## æ€§èƒ½ä¼˜åŒ–

### ç¼–è¯‘ä¼˜åŒ–é€‰é¡¹

```makefile
# è°ƒè¯•ç‰ˆæœ¬
make debug

# å‘å¸ƒç‰ˆæœ¬ï¼ˆé»˜è®¤ï¼‰
make
```

### è¿è¡Œæ—¶ä¼˜åŒ–å»ºè®®

1. **å¹¶å‘è®¾ç½®**ï¼šæ ¹æ®ç³»ç»Ÿå†…å­˜è°ƒæ•´
   - 4GBå†…å­˜ï¼š100-200 çº¿ç¨‹
   - 8GBå†…å­˜ï¼š200-400 çº¿ç¨‹
   - 16GB+å†…å­˜ï¼š500+ çº¿ç¨‹

2. **åŽ‹èƒŒæŽ§åˆ¶**ï¼šå»ºè®®åœ¨é•¿æœŸæ‰«æä¸­å¯ç”¨
   - é˜²æ­¢ç³»ç»Ÿå¡é¡¿
   - ä¿æŠ¤ç³»ç»Ÿç¨³å®šæ€§
   - è‡ªåŠ¨ä¼˜åŒ–æ€§èƒ½

## å¸¸è§é—®é¢˜

### Q: ç¼–è¯‘æ—¶æ‰¾ä¸åˆ°å¤´æ–‡ä»¶
A: ç¡®ä¿å®‰è£…äº†å®Œæ•´çš„æ ‡å‡†Cåº“å’Œå¤´æ–‡ä»¶

### Q: Windowsç¼–è¯‘å¤±è´¥
A: æ£€æŸ¥æ˜¯å¦å®‰è£…äº†MinGW-w64ï¼Œæˆ–ä½¿ç”¨Visual Studio

### Q: è¿è¡Œæ—¶æƒé™é”™è¯¯
A: Linux/macOSå¯èƒ½éœ€è¦ root æƒé™è¿›è¡ŒæŸäº›ç½‘ç»œæ“ä½œ

### Q: åŽ‹èƒŒæŽ§åˆ¶ä¸ç”Ÿæ•ˆ
A: æ£€æŸ¥æ˜¯å¦æ­£ç¡®å¯ç”¨äº†åŽ‹èƒŒåŠŸèƒ½ï¼ŒæŸ¥çœ‹é…ç½®æ–‡ä»¶

## æŠ€æœ¯ç»†èŠ‚

### çº¯Cå®žçŽ°çš„æŒ‘æˆ˜

æœ¬é¡¹ç›®ç”¨çº¯Cæ ‡å‡†åº“å®žçŽ°äº†ä»¥ä¸‹é«˜çº§åŠŸèƒ½ï¼š

1. **åŠ¨æ€å­—ç¬¦ä¸²** - æ‰‹åŠ¨å®žçŽ°å­—ç¬¦ä¸²ç¼“å†²åŒº
2. **JSONåºåˆ—åŒ–** - å®Œæ•´çš„JSONè¯»å†™æ”¯æŒ
3. **å¼‚æ­¥IO** - ä½¿ç”¨selectå®žçŽ°å¹¶å‘
4. **è·¨å¹³å°** - Windows/Unixç»Ÿä¸€æŽ¥å£
5. **èµ„æºç®¡ç†** - æ‰‹åŠ¨å†…å­˜ç®¡ç†

### åŽ‹èƒŒæŽ§åˆ¶ç®—æ³•

```
if (cpu > threshold || memory < min_threshold) {
    throttle = true;
    max_connections -= 50;
} else {
    throttle = false;
    max_connections += 20;
}
```

## å¼€å‘è®¡åˆ’

- [ ] å®Œæ•´çš„XUIè®¤è¯åè®®
- [ ] SOCKS5æ¡æ‰‹å®Œæ•´å®žçŽ°
- [ ] HTTPä»£ç†æ”¯æŒ
- [ ] å¤šIPæ®µæ‰¹é‡æ‰«æ
- [ ] å®žæ—¶è¿›åº¦æ˜¾ç¤º
- [ ] Webç•Œé¢ï¼ˆå¯é€‰ï¼‰

## è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ ç ”ç©¶ä½¿ç”¨ã€‚

## ä½œè€…

åŸºäºŽåŽŸ Python ç‰ˆæœ¬ DE.py é‡å†™ä¸ºçº¯Cè¯­è¨€å®žçŽ°

## æ›´æ–°æ—¥å¿—

### v24.0 (2025)
- âœ¨ çº¯Cè¯­è¨€å®žçŽ°
- âœ¨ è‡ªåŠ¨åŽ‹èƒŒåŠŸèƒ½
- âœ¨ è·¨å¹³å°æ”¯æŒ
- âœ¨ æ— ç¬¬ä¸‰æ–¹ä¾èµ–
